@@ DEPENCIES - Part of Core - INSTALL THIS FIRST!
@@ NOTE that for this code suite to work, #1 must be parented to the COI object this script creates and given the startup shown below. It is not recommended that the #1 object create the COI however. Use another Wizard player for that.

@tel create(Code Object Index <COI>)=config(master_room)
@parent me=locate(config(master_room),Code Object Index <COI>,TXxi)
&COI locate(config(master_room),Code Object Index <COI>,TXxi)=locate(config(master_room),Code Object Index <COI>,TXxi)
@set u(coi)=WIZARD

@parent #1=locate(config(master_room),Code Object Index <COI>,TXxi)

&STARTUP #1=@dolist/inline filterbool(#lambda/isdbref(\%0),iter(lattr(u(coi)/*),u(u(coi)/%i0)))={@dolist/inline lattr(%i0/GFN`*)={@function after(%i0,GFN`)=%i1/%i0}};@dolist/inline @dig @open @link={@command/restrict %i0=!POWER^GUEST&!FLAG^GAGGED&(POWER^BUILDER|FLAG^WIZARD|FLAG^ROYALTY)};@config/save event_handler=u(eh);@config/save ancestor_room=u(ar);@config/save ancestor_exit=u(ae);@config/save ancestor_thing=u(at);@config/save ancestor_player=u(ap)


